<template name="Edit">
  <button id="home">Home</button>

  {{ #if mode1 }}
    <button id="edit_gather_facts">Gather Facts</button>
  {{ /if }}

  {{ #if mode3 }}
    {{ #with testWord }}
      <button id="test_word_ok">OK</button>
      <div id="test_word_wrapper">
        <div class="lesson_word">{{ word }}</div>
      </div>
      <button class="test_word_skip" data="1">Skip</button>
      <button class="test_word_skip" data="-1">Back</button>
      {{ #if google_ok }}
        <div id="test_already_ok">already OK</div>
        <button id="test_word_not_ok">Not OK</button>
      {{ /if }}
      <button id="test_word_save_changes">Save Changes {{ ok_count }}</button>
      <button id="test_create_all_words">Create All Words</button>
      <button id="test_create_all_definitions">Create Definitions</button>
      &nbsp; {{ message }}
    {{ /with }}
  {{ /if }}

  {{ #if mode2 }}
    <button id="change_mode" data="1">Back</button>
    {{ #with gf_search }}
      Code <input type="text" id="gs_start" class="input_short gf_src" data="Code" data2="text" value="{{ Code}}">
      &nbsp; Color <input type="text" class="input_short gf_src" data="Color" data2="text" value="{{ Color}}">
      &nbsp; Number <input type="text" class="input_short gf_src" data="Number" data2="integer" value="{{ Number}}">
      &nbsp; Grade Level <input type="text" class="input_short gf_src" data="GradeLevel" data2="float" value="{{ GradeLevel}}">
      &nbsp; <button id="gf_search">Search</button>
      {{ #if local }}
        &nbsp; <button id="gf_test_sounds">Test Sounds</button>
        &nbsp; <button id="gf_reload_all_words">Reload All Words</button>
      {{ /if }}
      {{ #if error }}
      &nbsp; <div class="error">{{ error }}</div>
      {{ /if }}
    {{ /with }}

    {{ #if gatherfacts }}
      <div class="rpt_flex_heading" style="width: 80%;">
        <div class="gf_code">Code</div>
        <div class="gf_color">Color</div>
        <div class="gf_gradelevel">Grade</div>
        <div class="gf_number">Number</div>
        <div class="gf_paragraph">Lesson</div>
        <div class="gf_options">Options</div>
      </div>
      {{ #each gatherfacts }}
        <div class="rpt_flex {{ cls }}" style="width: 80%;">
          <div class="gf_code">{{ Code }}</div>
          <div class="gf_color">{{ Color }}</div>
          <div class="gf_gradelevel">{{ GradeLevel }}</div>
          <div class="gf_number">{{ Number }}</div>
          <div class="gf_paragraph">{{ Paragraph }}</div>
          <div class="gf_options">
            <a href="#" class="gf_edit" data="{{ Code }}_{{ Color }}_{{ LessonNum }}_{{ Number }}">edit</a>
            |
            <a href="#" class="gf_lesson" data="{{ _id }}">lesson</a>
          </div>
        </div>
      {{ /each }}
    {{ /if }}
  {{ /if }}

  <div class="popup" id="gf_lesson_popup">
    <div class="popup_inside">
      <button id="popup_close" data="gf_lesson_popup">Close</button>
      <button id="gf_edit_from_popup">Edit</button>
      {{> GFLesson }}
    </div>
  </div>

  <div class="popup" id="gf_popup">
    <div class="popup_inside">
      <div class="popup_title">Gathering Facts</div>
      <button id="popup_close" data="gf_popup">Cancel</button>
      <button id="gf_save">Save</button>
      {{ #with edit_gf_lesson }}
        {{ #with lesson }}
        Code: {{ Code }}
        &nbsp; Color: {{ Color }}
        &nbsp; Grade Level: {{ GradeLevel }}
        &nbsp; Number: {{ Number }}

        <textarea id="edit_paragraph">{{ Paragraph }}</textarea>

        <div class="show_paragraph">{{{ Paragraph }}}</div>
        {{ /with }}

        {{ #each list }}
          <div class="label_flex">
            <div class="label">{{ label }}</div>
            <div class="value">
              {{ #if html }}
                {{{ html }}}
              {{ else }}
                {{ value }}
              {{ /if }}
            </div>
          </div>
        {{ /each }}
      {{ /with }}
    </div>
  </div>
</template>
